From 17abfe243b9207c7cd302c0484c791886cbcd880 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Fri, 17 Sep 2010 13:47:35 -0500
Subject: [PATCH 1/2] ARM OMAP Touchbook upstream power supply

---
 arch/arm/mach-omap2/board-omap3touchbook.c |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/board-omap3touchbook.c b/arch/arm/mach-omap2/board-omap3touchbook.c
index c25673d..01a006c 100644
--- a/arch/arm/mach-omap2/board-omap3touchbook.c
+++ b/arch/arm/mach-omap2/board-omap3touchbook.c
@@ -329,6 +329,15 @@ static struct twl4030_madc_platform_data touchbook_madc_data = {
 	.irq_line	= 1,
 };
 
+static struct twl4030_bci_platform_data touchbook_bci_data = {
+	.tblsize		= 0,
+	.no_backup_battery	= 1,
+	.manufacturer		= "Always Innovating",
+	.model_name		= "Tablet 6000mAh v1.0",
+	.technology		= POWER_SUPPLY_TECHNOLOGY_LIPO,
+	.energy_full_design	= 6000,
+};
+
 static struct twl4030_platform_data touchbook_twldata = {
 	.irq_base	= TWL4030_IRQ_BASE,
 	.irq_end	= TWL4030_IRQ_END,
@@ -342,6 +351,7 @@ static struct twl4030_platform_data touchbook_twldata = {
 	.vsim		= &touchbook_vsim,
 	.vdac		= &touchbook_vdac,
 	.vpll2		= &touchbook_vpll2,
+//	.bci		= &touchbook_bci_data,
 };
 
 static struct i2c_board_info __initdata touchbook_i2c_boardinfo_1[] = {
@@ -353,6 +363,13 @@ static struct i2c_board_info __initdata touchbook_i2c_boardinfo_1[] = {
 	},
 };
 
+static struct bq27x00_platform_data touchbook_bq27200_data = {
+	.manufacturer		= "Always Innovating",
+	.model_name		= "Keyboard 12000mAh v1.0",
+	.technology		= POWER_SUPPLY_TECHNOLOGY_LIPO,
+	.energy_full_design	= 12000,
+};
+
 static struct chacha_platform_data touchbook_chacha_t_data = {
 	.gpio		= 155,
 	.version	= 3,
@@ -369,6 +386,7 @@ static struct chacha_platform_data touchbook_chacha_t_data = {
 static struct i2c_board_info __initdata touchbook_i2c_boardinfo_3[] = {
 	{
 		I2C_BOARD_INFO("bq27200", 0x55),
+		.platform_data = &touchbook_bq27200_data,
 	},
 	{
 		I2C_BOARD_INFO("chacha", 0x40),
-- 
1.7.1

