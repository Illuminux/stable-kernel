From 693b28ffc90868596b7c6a4b75f216dc9efde75e Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Mon, 20 Sep 2010 18:32:27 -0500
Subject: [PATCH] ARM OMAP Touchbook 2.6.35 omap3touchbook to touchbook

---
 arch/arm/mach-omap2/board-omap3touchbook.c |   28 ++++++++++++++--------------
 1 files changed, 14 insertions(+), 14 deletions(-)

diff --git a/arch/arm/mach-omap2/board-omap3touchbook.c b/arch/arm/mach-omap2/board-omap3touchbook.c
index 0e2ab3c..189aba7 100644
--- a/arch/arm/mach-omap2/board-omap3touchbook.c
+++ b/arch/arm/mach-omap2/board-omap3touchbook.c
@@ -66,7 +66,7 @@
 
 unsigned long touchbook_revision;
 
-static struct mtd_partition omap3touchbook_nand_partitions[] = {
+static struct mtd_partition touchbook_nand_partitions[] = {
 	/* All the partition sizes are listed in terms of NAND block size */
 	{
 		.name		= "X-Loader",
@@ -96,27 +96,27 @@ static struct mtd_partition omap3touchbook_nand_partitions[] = {
 	},
 };
 
-static struct omap_nand_platform_data omap3touchbook_nand_data = {
+static struct omap_nand_platform_data touchbook_nand_data = {
 	.options	= NAND_BUSWIDTH_16,
-	.parts		= omap3touchbook_nand_partitions,
-	.nr_parts	= ARRAY_SIZE(omap3touchbook_nand_partitions),
+	.parts		= touchbook_nand_partitions,
+	.nr_parts	= ARRAY_SIZE(touchbook_nand_partitions),
 	.dma_channel	= -1,		/* disable DMA in OMAP NAND driver */
 	.nand_setup	= NULL,
 	.dev_ready	= NULL,
 };
 
-static struct resource omap3touchbook_nand_resource = {
+static struct resource touchbook_nand_resource = {
 	.flags		= IORESOURCE_MEM,
 };
 
-static struct platform_device omap3touchbook_nand_device = {
+static struct platform_device touchbook_nand_device = {
 	.name		= "omap2-nand",
 	.id		= -1,
 	.dev		= {
-		.platform_data	= &omap3touchbook_nand_data,
+		.platform_data	= &touchbook_nand_data,
 	},
 	.num_resources	= 1,
-	.resource	= &omap3touchbook_nand_resource,
+	.resource	= &touchbook_nand_resource,
 };
 
 static int touchbook_enable_dvi(struct omap_dss_device *dssdev)
@@ -503,7 +503,7 @@ static struct platform_device *omap3_touchbook_devices[] __initdata = {
 	&touchbook_dss_device,
 };
 
-static void __init omap3touchbook_flash_init(void)
+static void __init touchbook_flash_init(void)
 {
 	u8 cs = 0;
 	u8 nandcs = GPMC_CS_NUM + 1;
@@ -530,14 +530,14 @@ static void __init omap3touchbook_flash_init(void)
 	}
 
 	if (nandcs < GPMC_CS_NUM) {
-		omap3touchbook_nand_data.cs = nandcs;
-		omap3touchbook_nand_data.gpmc_cs_baseaddr = (void *)
+		touchbook_nand_data.cs = nandcs;
+		touchbook_nand_data.gpmc_cs_baseaddr = (void *)
 			(gpmc_base_add + GPMC_CS0_BASE + nandcs * GPMC_CS_SIZE);
-		omap3touchbook_nand_data.gpmc_baseaddr =
+		touchbook_nand_data.gpmc_baseaddr =
 						(void *) (gpmc_base_add);
 
 		printk(KERN_INFO "Registering NAND on CS%d\n", nandcs);
-		if (platform_device_register(&omap3touchbook_nand_device) < 0)
+		if (platform_device_register(&touchbook_nand_device) < 0)
 			printk(KERN_ERR "Unable to register NAND device\n");
 	}
 }
@@ -603,7 +603,7 @@ static void __init omap3_touchbook_init(void)
 	omap3_ads7846_init();
 	usb_musb_init(&musb_board_data);
 	usb_ehci_init(&ehci_pdata);
-	omap3touchbook_flash_init();
+	touchbook_flash_init();
 
 	/* Ensure SDRC pins are mux'd for self-refresh */
 	omap_mux_init_signal("sdrc_cke0", OMAP_PIN_OUTPUT);
-- 
1.7.1

