From 1ead1d632434abdf451ecfc1daa82e2df8cf7121 Mon Sep 17 00:00:00 2001
From: Shivananda Hebbar <x0hebbar@ti.com>
Date: Mon, 19 Apr 2010 18:15:54 -0500
Subject: [PATCH 064/135] DSPBRIDGE: replace error code DSP_ECORRUPTFILE for -EBADF

This patch replaces DSP_ECORRUPTFILE with -EBADF.

Signed-off-by: Shivananda Hebbar <x0hebbar@ti.com>
---
 arch/arm/plat-omap/include/dspbridge/dblldefs.h |    2 +-
 drivers/dsp/bridge/rmgr/nldr.c                  |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/plat-omap/include/dspbridge/dblldefs.h b/arch/arm/plat-omap/include/dspbridge/dblldefs.h
index 5dd23fb..e5184bf 100644
--- a/arch/arm/plat-omap/include/dspbridge/dblldefs.h
+++ b/arch/arm/plat-omap/include/dspbridge/dblldefs.h
@@ -387,7 +387,7 @@ typedef dsp_status(*dbll_load_sect_fxn) (struct dbll_library_obj *lib,
  *      -ENOMEM:        Memory allocation failure.
  *      -EBADF:         File open failure.
  *      -EBADF:         File read failure.
- *      DSP_ECORRUPTFILE:   Unable to determine target type.
+ *      -EBADF:   Unable to determine target type.
  *  Requires:
  *      DBL initialized.
  *      Valid target.
diff --git a/drivers/dsp/bridge/rmgr/nldr.c b/drivers/dsp/bridge/rmgr/nldr.c
index 915c2a7..3cb8cc4 100644
--- a/drivers/dsp/bridge/rmgr/nldr.c
+++ b/drivers/dsp/bridge/rmgr/nldr.c
@@ -521,7 +521,7 @@ dsp_status nldr_create(OUT struct nldr_object **phNldr,
 		/* Parse memory segment data */
 		dload_segs = (u16) (*((u32 *) psz_coff_buf));
 		if (dload_segs > MAXMEMSEGS)
-			status = DSP_ECORRUPTFILE;
+			status = -EBADF;
 	}
 	/* Parse dynamic load memory segments */
 	if (DSP_SUCCEEDED(status) && dload_segs > 0) {
-- 
1.7.0.4

