From 70ec98e20a7cb8ce6e0885a65fe7b2976a1bea8f Mon Sep 17 00:00:00 2001
From: Shivananda Hebbar <x0hebbar@ti.com>
Date: Mon, 19 Apr 2010 18:14:56 -0500
Subject: [PATCH 039/135] DSPBRIDGE: replace error code CFG_E_INVALIDHDEVNODE for -EFAULT

This patch replaces CFG_E_INVALIDHDEVNODE with -EFAULT.

Signed-off-by: Shivananda Hebbar <x0hebbar@ti.com>
---
 arch/arm/plat-omap/include/dspbridge/cfg.h |   16 ++++++++--------
 drivers/dsp/bridge/services/cfg.c          |   14 +++++++-------
 2 files changed, 15 insertions(+), 15 deletions(-)

diff --git a/arch/arm/plat-omap/include/dspbridge/cfg.h b/arch/arm/plat-omap/include/dspbridge/cfg.h
index cc133c2..dd91f8e 100644
--- a/arch/arm/plat-omap/include/dspbridge/cfg.h
+++ b/arch/arm/plat-omap/include/dspbridge/cfg.h
@@ -43,7 +43,7 @@ extern void cfg_exit(void);
  *      pdwAutoStart:   Ptr to location for 32 bit autostart mask.
  *  Returns:
  *      DSP_SOK:                Success.
- *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
+ *      -EFAULT:  dev_node_obj is invalid.
  *      -ENODATA: Unable to retreive resource.
  *  Requires:
  *      CFG initialized.
@@ -82,7 +82,7 @@ extern dsp_status cfg_get_cd_version(OUT u32 *pdwVersion);
  *      pdwValue:       Ptr to location to store the value.
  *  Returns:
  *      DSP_SOK:                Success.
- *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
+ *      -EFAULT:  dev_node_obj is invalid.
  *      CFG_E_INVALIDPOINTER:   phDevObject is invalid.
  *      -ENODATA: The resource is not available.
  *  Requires:
@@ -103,7 +103,7 @@ extern dsp_status cfg_get_dev_object(IN struct cfg_devnode *dev_node_obj,
  *      pDSPResTable:   Ptr to a location to store the DSP resource table.
  *  Returns:
  *      DSP_SOK:                On success.
- *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
+ *      -EFAULT:  dev_node_obj is invalid.
  *      -ENODATA: The DSP Resource information is not
  *                              available
  *  Requires:
@@ -125,7 +125,7 @@ extern dsp_status cfg_get_dsp_resources(IN struct cfg_devnode *dev_node_obj,
  *      pstrExecFile:   Ptr to character buf to hold ExecFile.
  *  Returns:
  *      DSP_SOK:                Success.
- *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
+ *      -EFAULT:  dev_node_obj is invalid.
  *      CFG_E_INVALIDPOINTER:   pstrExecFile is invalid.
  *      -ENODATA: The resource is not available.
  *  Requires:
@@ -148,7 +148,7 @@ extern dsp_status cfg_get_exec_file(IN struct cfg_devnode *dev_node_obj,
  *  Returns:
  *      DSP_SOK:                On success.
  *      CFG_E_INVALIDPOINTER:   pHostResTable is invalid.
- *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
+ *      -EFAULT:  dev_node_obj is invalid.
  *      -ENODATA: The resource is not available.
  *  Requires:
  *      CFG initialized.
@@ -203,7 +203,7 @@ extern void cfg_get_perf_value(OUT bool *pfEnablePerf);
  *      pWMDFileName:   Ptr to a character buffer to hold the WMD filename.
  *  Returns:
  *      DSP_SOK:                On success.
- *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
+ *      -EFAULT:  dev_node_obj is invalid.
  *      -ENODATA: The filename is not available.
  *  Requires:
  *      CFG initialized.
@@ -227,7 +227,7 @@ extern dsp_status cfg_get_wmd_file_name(IN struct cfg_devnode *dev_node_obj,
  *  Returns:
  *      DSP_SOK:                Success.
  *      CFG_E_INVALIDPOINTER:   pstrZLFileName is invalid.
- *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
+ *      -EFAULT:  dev_node_obj is invalid.
  *      -ENODATA: couldn't find the ZLFileName.
  *  Requires:
  *      CFG initialized.
@@ -261,7 +261,7 @@ extern bool cfg_init(void);
  *      dwValue:    Arbitrary value to store.
  *  Returns:
  *      DSP_SOK:                Success.
- *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
+ *      -EFAULT:  dev_node_obj is invalid.
  *      -EPERM:              Internal Error.
  *  Requires:
  *      CFG initialized.
diff --git a/drivers/dsp/bridge/services/cfg.c b/drivers/dsp/bridge/services/cfg.c
index 4027d7c..0c659b3 100644
--- a/drivers/dsp/bridge/services/cfg.c
+++ b/drivers/dsp/bridge/services/cfg.c
@@ -58,7 +58,7 @@ dsp_status cfg_get_auto_start(struct cfg_devnode *dev_node_obj,
 
 	dw_buf_size = sizeof(*pdwAutoStart);
 	if (!dev_node_obj)
-		status = CFG_E_INVALIDHDEVNODE;
+		status = -EFAULT;
 	if (!pdwAutoStart)
 		status = CFG_E_INVALIDPOINTER;
 	if (DSP_SUCCEEDED(status)) {
@@ -86,10 +86,10 @@ dsp_status cfg_get_dev_object(struct cfg_devnode *dev_node_obj,
 	u32 dw_buf_size;
 
 	if (!dev_node_obj)
-		status = CFG_E_INVALIDHDEVNODE;
+		status = -EFAULT;
 
 	if (!pdwValue)
-		status = CFG_E_INVALIDHDEVNODE;
+		status = -EFAULT;
 
 	dw_buf_size = sizeof(pdwValue);
 	if (DSP_SUCCEEDED(status)) {
@@ -120,7 +120,7 @@ dsp_status cfg_get_dsp_resources(struct cfg_devnode *dev_node_obj,
 	u32 dw_res_size;
 
 	if (!dev_node_obj) {
-		status = CFG_E_INVALIDHDEVNODE;
+		status = -EFAULT;
 	} else if (!pDSPResTable) {
 		status = CFG_E_INVALIDPOINTER;
 	} else {
@@ -152,7 +152,7 @@ dsp_status cfg_get_exec_file(struct cfg_devnode *dev_node_obj, u32 ul_buf_size,
 	u32 exec_size = ul_buf_size;
 
 	if (!dev_node_obj)
-		status = CFG_E_INVALIDHDEVNODE;
+		status = -EFAULT;
 	else if (!pstrExecFile)
 		status = CFG_E_INVALIDPOINTER;
 
@@ -185,7 +185,7 @@ dsp_status cfg_get_host_resources(struct cfg_devnode *dev_node_obj,
 	u32 dw_buf_size;
 
 	if (!dev_node_obj)
-		status = CFG_E_INVALIDHDEVNODE;
+		status = -EFAULT;
 
 	if (!pHostResTable)
 		status = CFG_E_INVALIDPOINTER;
@@ -274,7 +274,7 @@ dsp_status cfg_set_dev_object(struct cfg_devnode *dev_node_obj, u32 dwValue)
 	u32 dw_buff_size;
 
 	if (!dev_node_obj)
-		status = CFG_E_INVALIDHDEVNODE;
+		status = -EFAULT;
 
 	dw_buff_size = sizeof(dwValue);
 	if (DSP_SUCCEEDED(status)) {
-- 
1.7.0.4

