From 2ce554fddd8fe968b71960e0be857140b8eca63f Mon Sep 17 00:00:00 2001
From: Shivananda Hebbar <x0hebbar@ti.com>
Date: Mon, 19 Apr 2010 18:14:54 -0500
Subject: [PATCH 038/135] DSPBRIDGE: replace error code CFG_E_RESOURCENOTAVAIL for -ENODATA

This patch replaces CFG_E_RESOURCENOTAVAIL with -ENODATA.

Signed-off-by: Shivananda Hebbar <x0hebbar@ti.com>
---
 arch/arm/plat-omap/include/dspbridge/cfg.h |   14 +++++++-------
 drivers/dsp/bridge/rmgr/drv.c              |    2 +-
 drivers/dsp/bridge/services/cfg.c          |   12 ++++++------
 3 files changed, 14 insertions(+), 14 deletions(-)

diff --git a/arch/arm/plat-omap/include/dspbridge/cfg.h b/arch/arm/plat-omap/include/dspbridge/cfg.h
index 83a76e9..cc133c2 100644
--- a/arch/arm/plat-omap/include/dspbridge/cfg.h
+++ b/arch/arm/plat-omap/include/dspbridge/cfg.h
@@ -44,7 +44,7 @@ extern void cfg_exit(void);
  *  Returns:
  *      DSP_SOK:                Success.
  *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
- *      CFG_E_RESOURCENOTAVAIL: Unable to retreive resource.
+ *      -ENODATA: Unable to retreive resource.
  *  Requires:
  *      CFG initialized.
  *  Ensures:
@@ -84,7 +84,7 @@ extern dsp_status cfg_get_cd_version(OUT u32 *pdwVersion);
  *      DSP_SOK:                Success.
  *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
  *      CFG_E_INVALIDPOINTER:   phDevObject is invalid.
- *      CFG_E_RESOURCENOTAVAIL: The resource is not available.
+ *      -ENODATA: The resource is not available.
  *  Requires:
  *      CFG initialized.
  *  Ensures:
@@ -104,7 +104,7 @@ extern dsp_status cfg_get_dev_object(IN struct cfg_devnode *dev_node_obj,
  *  Returns:
  *      DSP_SOK:                On success.
  *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
- *      CFG_E_RESOURCENOTAVAIL: The DSP Resource information is not
+ *      -ENODATA: The DSP Resource information is not
  *                              available
  *  Requires:
  *      CFG initialized.
@@ -127,7 +127,7 @@ extern dsp_status cfg_get_dsp_resources(IN struct cfg_devnode *dev_node_obj,
  *      DSP_SOK:                Success.
  *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
  *      CFG_E_INVALIDPOINTER:   pstrExecFile is invalid.
- *      CFG_E_RESOURCENOTAVAIL: The resource is not available.
+ *      -ENODATA: The resource is not available.
  *  Requires:
  *      CFG initialized.
  *  Ensures:
@@ -149,7 +149,7 @@ extern dsp_status cfg_get_exec_file(IN struct cfg_devnode *dev_node_obj,
  *      DSP_SOK:                On success.
  *      CFG_E_INVALIDPOINTER:   pHostResTable is invalid.
  *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
- *      CFG_E_RESOURCENOTAVAIL: The resource is not available.
+ *      -ENODATA: The resource is not available.
  *  Requires:
  *      CFG initialized.
  *  Ensures:
@@ -204,7 +204,7 @@ extern void cfg_get_perf_value(OUT bool *pfEnablePerf);
  *  Returns:
  *      DSP_SOK:                On success.
  *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
- *      CFG_E_RESOURCENOTAVAIL: The filename is not available.
+ *      -ENODATA: The filename is not available.
  *  Requires:
  *      CFG initialized.
  *  Ensures:
@@ -228,7 +228,7 @@ extern dsp_status cfg_get_wmd_file_name(IN struct cfg_devnode *dev_node_obj,
  *      DSP_SOK:                Success.
  *      CFG_E_INVALIDPOINTER:   pstrZLFileName is invalid.
  *      CFG_E_INVALIDHDEVNODE:  dev_node_obj is invalid.
- *      CFG_E_RESOURCENOTAVAIL: couldn't find the ZLFileName.
+ *      -ENODATA: couldn't find the ZLFileName.
  *  Requires:
  *      CFG initialized.
  *  Ensures:
diff --git a/drivers/dsp/bridge/rmgr/drv.c b/drivers/dsp/bridge/rmgr/drv.c
index 6751f5e..4b0687b 100644
--- a/drivers/dsp/bridge/rmgr/drv.c
+++ b/drivers/dsp/bridge/rmgr/drv.c
@@ -868,7 +868,7 @@ static dsp_status request_bridge_resources(u32 dw_context, s32 bRequest)
 			if (DSP_FAILED(reg_get_value(CURRENTCONFIG,
 						     (u8 *) host_res,
 						     &dw_buff_size))) {
-				status = CFG_E_RESOURCENOTAVAIL;
+				status = -ENODATA;
 			}
 
 			dw_buff_size = sizeof(shm_size);
diff --git a/drivers/dsp/bridge/services/cfg.c b/drivers/dsp/bridge/services/cfg.c
index a3daad7..4027d7c 100644
--- a/drivers/dsp/bridge/services/cfg.c
+++ b/drivers/dsp/bridge/services/cfg.c
@@ -65,7 +65,7 @@ dsp_status cfg_get_auto_start(struct cfg_devnode *dev_node_obj,
 		status = reg_get_value(AUTOSTART, (u8 *) pdwAutoStart,
 				       &dw_buf_size);
 		if (DSP_FAILED(status))
-			status = CFG_E_RESOURCENOTAVAIL;
+			status = -ENODATA;
 	}
 
 	DBC_ENSURE((status == DSP_SOK &&
@@ -128,7 +128,7 @@ dsp_status cfg_get_dsp_resources(struct cfg_devnode *dev_node_obj,
 				       &dw_res_size);
 	}
 	if (DSP_FAILED(status)) {
-		status = CFG_E_RESOURCENOTAVAIL;
+		status = -ENODATA;
 		pr_err("%s: Failed, status 0x%x\n", __func__, status);
 	}
 	/* assert that resource values are reasonable */
@@ -160,7 +160,7 @@ dsp_status cfg_get_exec_file(struct cfg_devnode *dev_node_obj, u32 ul_buf_size,
 		status =
 		    reg_get_value(DEFEXEC, (u8 *) pstrExecFile, &exec_size);
 		if (DSP_FAILED(status))
-			status = CFG_E_RESOURCENOTAVAIL;
+			status = -ENODATA;
 		else if (exec_size > ul_buf_size)
 			status = DSP_ESIZE;
 
@@ -195,7 +195,7 @@ dsp_status cfg_get_host_resources(struct cfg_devnode *dev_node_obj,
 		if (DSP_FAILED
 		    (reg_get_value
 		     (CURRENTCONFIG, (u8 *) pHostResTable, &dw_buf_size))) {
-			status = CFG_E_RESOURCENOTAVAIL;
+			status = -ENODATA;
 		}
 	}
 	if (DSP_FAILED(status))
@@ -220,13 +220,13 @@ dsp_status cfg_get_object(OUT u32 *pdwValue, u32 dw_type)
 		status =
 		    reg_get_value(DRVOBJECT, (u8 *) pdwValue, &dw_buf_size);
 		if (DSP_FAILED(status))
-			status = CFG_E_RESOURCENOTAVAIL;
+			status = -ENODATA;
 		break;
 	case (REG_MGR_OBJECT):
 		status =
 		    reg_get_value(MGROBJECT, (u8 *) pdwValue, &dw_buf_size);
 		if (DSP_FAILED(status))
-			status = CFG_E_RESOURCENOTAVAIL;
+			status = -ENODATA;
 		break;
 	default:
 		break;
-- 
1.7.0.4

