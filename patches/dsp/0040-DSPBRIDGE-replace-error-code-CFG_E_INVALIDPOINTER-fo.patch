From 8146fbcb0ce79bb8b7527ac0ad118740c4a8e8b4 Mon Sep 17 00:00:00 2001
From: Shivananda Hebbar <x0hebbar@ti.com>
Date: Mon, 19 Apr 2010 18:14:59 -0500
Subject: [PATCH 040/135] DSPBRIDGE: replace error code CFG_E_INVALIDPOINTER for -EFAULT

This patch replaces CFG_E_INVALIDPOINTER with -EFAULT.

Signed-off-by: Shivananda Hebbar <x0hebbar@ti.com>
---
 arch/arm/plat-omap/include/dspbridge/cfg.h |    8 ++++----
 drivers/dsp/bridge/services/cfg.c          |    8 ++++----
 2 files changed, 8 insertions(+), 8 deletions(-)

diff --git a/arch/arm/plat-omap/include/dspbridge/cfg.h b/arch/arm/plat-omap/include/dspbridge/cfg.h
index dd91f8e..a760fdd 100644
--- a/arch/arm/plat-omap/include/dspbridge/cfg.h
+++ b/arch/arm/plat-omap/include/dspbridge/cfg.h
@@ -83,7 +83,7 @@ extern dsp_status cfg_get_cd_version(OUT u32 *pdwVersion);
  *  Returns:
  *      DSP_SOK:                Success.
  *      -EFAULT:  dev_node_obj is invalid.
- *      CFG_E_INVALIDPOINTER:   phDevObject is invalid.
+ *      -EFAULT:   phDevObject is invalid.
  *      -ENODATA: The resource is not available.
  *  Requires:
  *      CFG initialized.
@@ -126,7 +126,7 @@ extern dsp_status cfg_get_dsp_resources(IN struct cfg_devnode *dev_node_obj,
  *  Returns:
  *      DSP_SOK:                Success.
  *      -EFAULT:  dev_node_obj is invalid.
- *      CFG_E_INVALIDPOINTER:   pstrExecFile is invalid.
+ *      -EFAULT:   pstrExecFile is invalid.
  *      -ENODATA: The resource is not available.
  *  Requires:
  *      CFG initialized.
@@ -147,7 +147,7 @@ extern dsp_status cfg_get_exec_file(IN struct cfg_devnode *dev_node_obj,
  *      pHostResTable:  Ptr to a location to store the host resource table.
  *  Returns:
  *      DSP_SOK:                On success.
- *      CFG_E_INVALIDPOINTER:   pHostResTable is invalid.
+ *      -EFAULT:   pHostResTable is invalid.
  *      -EFAULT:  dev_node_obj is invalid.
  *      -ENODATA: The resource is not available.
  *  Requires:
@@ -226,7 +226,7 @@ extern dsp_status cfg_get_wmd_file_name(IN struct cfg_devnode *dev_node_obj,
  *      pstrZLFileName: Ptr to character buf to hold ZLFileName.
  *  Returns:
  *      DSP_SOK:                Success.
- *      CFG_E_INVALIDPOINTER:   pstrZLFileName is invalid.
+ *      -EFAULT:   pstrZLFileName is invalid.
  *      -EFAULT:  dev_node_obj is invalid.
  *      -ENODATA: couldn't find the ZLFileName.
  *  Requires:
diff --git a/drivers/dsp/bridge/services/cfg.c b/drivers/dsp/bridge/services/cfg.c
index 0c659b3..a472fef 100644
--- a/drivers/dsp/bridge/services/cfg.c
+++ b/drivers/dsp/bridge/services/cfg.c
@@ -60,7 +60,7 @@ dsp_status cfg_get_auto_start(struct cfg_devnode *dev_node_obj,
 	if (!dev_node_obj)
 		status = -EFAULT;
 	if (!pdwAutoStart)
-		status = CFG_E_INVALIDPOINTER;
+		status = -EFAULT;
 	if (DSP_SUCCEEDED(status)) {
 		status = reg_get_value(AUTOSTART, (u8 *) pdwAutoStart,
 				       &dw_buf_size);
@@ -122,7 +122,7 @@ dsp_status cfg_get_dsp_resources(struct cfg_devnode *dev_node_obj,
 	if (!dev_node_obj) {
 		status = -EFAULT;
 	} else if (!pDSPResTable) {
-		status = CFG_E_INVALIDPOINTER;
+		status = -EFAULT;
 	} else {
 		status = reg_get_value(DSPRESOURCES, (u8 *) pDSPResTable,
 				       &dw_res_size);
@@ -154,7 +154,7 @@ dsp_status cfg_get_exec_file(struct cfg_devnode *dev_node_obj, u32 ul_buf_size,
 	if (!dev_node_obj)
 		status = -EFAULT;
 	else if (!pstrExecFile)
-		status = CFG_E_INVALIDPOINTER;
+		status = -EFAULT;
 
 	if (DSP_SUCCEEDED(status)) {
 		status =
@@ -188,7 +188,7 @@ dsp_status cfg_get_host_resources(struct cfg_devnode *dev_node_obj,
 		status = -EFAULT;
 
 	if (!pHostResTable)
-		status = CFG_E_INVALIDPOINTER;
+		status = -EFAULT;
 
 	if (DSP_SUCCEEDED(status)) {
 		dw_buf_size = sizeof(struct cfg_hostres);
-- 
1.7.0.4

