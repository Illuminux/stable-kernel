From f0669db601cbb9caf4779fbc6601f97b78d311de Mon Sep 17 00:00:00 2001
From: Shivananda Hebbar <x0hebbar@ti.com>
Date: Mon, 19 Apr 2010 18:15:20 -0500
Subject: [PATCH 049/135] DSPBRIDGE: replace error code CHNL_E_CHANBUSY for -EALREADY

This patch replaces CHNL_E_CHANBUSY with -EALREADY.

Signed-off-by: Shivananda Hebbar <x0hebbar@ti.com>
---
 arch/arm/plat-omap/include/dspbridge/wmd.h |    2 +-
 drivers/dsp/bridge/rmgr/strm.c             |    2 +-
 drivers/dsp/bridge/wmd/chnl_sm.c           |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/arm/plat-omap/include/dspbridge/wmd.h b/arch/arm/plat-omap/include/dspbridge/wmd.h
index 6d6cd61..1fb69f7 100644
--- a/arch/arm/plat-omap/include/dspbridge/wmd.h
+++ b/arch/arm/plat-omap/include/dspbridge/wmd.h
@@ -394,7 +394,7 @@ typedef void (*fxn_deh_notify) (struct deh_mgr *hdeh_mgr,
  *      DSP_EINVALIDARG:        Invalid number of IOReqs.
  *      CHNL_E_OUTOFSTREAMS:    No free channels available.
  *      CHNL_E_BADCHANID:       Channel ID is out of range.
- *      CHNL_E_CHANBUSY:        Channel is in use.
+ *      -EALREADY:        Channel is in use.
  *      CHNL_E_NOIORPS:         No free IO request packets available for
  *                              queuing.
  *  Requires:
diff --git a/drivers/dsp/bridge/rmgr/strm.c b/drivers/dsp/bridge/rmgr/strm.c
index 81f10bd..fd4b042 100644
--- a/drivers/dsp/bridge/rmgr/strm.c
+++ b/drivers/dsp/bridge/rmgr/strm.c
@@ -593,7 +593,7 @@ func_cont:
 				 */
 				DBC_ASSERT(status == CHNL_E_OUTOFSTREAMS ||
 					   status == CHNL_E_BADCHANID ||
-					   status == CHNL_E_CHANBUSY ||
+					   status == -EALREADY ||
 					   status == CHNL_E_NOIORPS);
 				status = -EPERM;
 			}
diff --git a/drivers/dsp/bridge/wmd/chnl_sm.c b/drivers/dsp/bridge/wmd/chnl_sm.c
index 15bbcff..eaecba9 100644
--- a/drivers/dsp/bridge/wmd/chnl_sm.c
+++ b/drivers/dsp/bridge/wmd/chnl_sm.c
@@ -808,7 +808,7 @@ dsp_status bridge_chnl_open(OUT struct chnl_object **phChnl,
 					status = CHNL_E_BADCHANID;
 				else if (chnl_mgr_obj->ap_channel[uChnlId] !=
 					 NULL)
-					status = CHNL_E_CHANBUSY;
+					status = -EALREADY;
 			} else {
 				/* Check for free channel */
 				status =
-- 
1.7.0.4

