From cd057ffb58e5375d9f48eaf9c5835bf7f8a31447 Mon Sep 17 00:00:00 2001
From: Shivananda Hebbar <x0hebbar@ti.com>
Date: Mon, 19 Apr 2010 18:14:52 -0500
Subject: [PATCH 037/135] DSPBRIDGE: replace error code COD_E_OPENFAILED for -EBADF

This patch replaces COD_E_OPENFAILED with -EBADF.

Signed-off-by: Shivananda Hebbar <x0hebbar@ti.com>
---
 arch/arm/plat-omap/include/dspbridge/cod.h |    6 +++---
 drivers/dsp/bridge/rmgr/proc.c             |    2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/arm/plat-omap/include/dspbridge/cod.h b/arch/arm/plat-omap/include/dspbridge/cod.h
index 66cb357..bb6a379 100644
--- a/arch/arm/plat-omap/include/dspbridge/cod.h
+++ b/arch/arm/plat-omap/include/dspbridge/cod.h
@@ -286,7 +286,7 @@ extern bool cod_init(void);
  *      envp:       array of environment strings for DSP exec.
  *  Returns:
  *      DSP_SOK:                   Success.
- *      COD_E_OPENFAILED:       Failed to open target code.
+ *      -EBADF:       Failed to open target code.
  *      COD_E_LOADFAILED:       Failed to load code onto target.
  *  Requires:
  *      COD module initialized.
@@ -315,7 +315,7 @@ extern dsp_status cod_load_base(struct cod_manager *cod_mgr_obj,
  *                      and cod_get_section.
  *  Returns:
  *      S_OK:                   Success.
- *      COD_E_OPENFAILED:       Failed to open target code.
+ *      -EBADF:       Failed to open target code.
  *  Requires:
  *      COD module initialized.
  *      hmgr is valid.
@@ -337,7 +337,7 @@ extern dsp_status cod_open(struct cod_manager *hmgr,
  *      flags:          Specifies whether to load symbols.
  *  Returns:
  *      DSP_SOK:            Success.
- *      COD_E_OPENFAILED:   Failed to open target code.
+ *      -EBADF:   Failed to open target code.
  *  Requires:
  *      COD module initialized.
  *      hmgr is valid.
diff --git a/drivers/dsp/bridge/rmgr/proc.c b/drivers/dsp/bridge/rmgr/proc.c
index 1b8166e..d7ff16c 100644
--- a/drivers/dsp/bridge/rmgr/proc.c
+++ b/drivers/dsp/bridge/rmgr/proc.c
@@ -973,7 +973,7 @@ dsp_status proc_load(void *hprocessor, IN CONST s32 argc_index,
 				       dev_brd_write_fxn,
 				       p_proc_object->hdev_obj, NULL);
 		if (DSP_FAILED(status)) {
-			if (status == COD_E_OPENFAILED) {
+			if (status == -EBADF) {
 				dev_dbg(bridge, "%s: Failure to Load the EXE\n",
 					__func__);
 			}
-- 
1.7.0.4

