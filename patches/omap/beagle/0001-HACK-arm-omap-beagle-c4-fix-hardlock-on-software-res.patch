From 13410138a8d9c5cac15f5ffcb6524ef5b885ef02 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Wed, 14 Nov 2012 20:22:56 -0600
Subject: [PATCH] HACK: arm: omap: beagle c4: fix hardlock on software reset
 with CONFIG_CPU_FREQ_GOV_ONDEMAND enabled

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/mach-omap2/twl-common.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/arch/arm/mach-omap2/twl-common.c b/arch/arm/mach-omap2/twl-common.c
index 50ab9ea..bca1232 100644
--- a/arch/arm/mach-omap2/twl-common.c
+++ b/arch/arm/mach-omap2/twl-common.c
@@ -217,14 +217,14 @@ void __init omap3_pmic_get_config(struct twl4030_platform_data *pmic_data,
 				  u32 pdata_flags, u32 regulators_flags)
 {
 	if (!pmic_data->vdd1) {
-		omap3_vdd1.driver_data = &omap3_vdd1_drvdata;
-		omap3_vdd1_drvdata.data = voltdm_lookup("mpu_iva");
-		pmic_data->vdd1 = &omap3_vdd1;
+//		omap3_vdd1.driver_data = &omap3_vdd1_drvdata;
+//		omap3_vdd1_drvdata.data = voltdm_lookup("mpu_iva");
+//		pmic_data->vdd1 = &omap3_vdd1;
 	}
 	if (!pmic_data->vdd2) {
-		omap3_vdd2.driver_data = &omap3_vdd2_drvdata;
-		omap3_vdd2_drvdata.data = voltdm_lookup("core");
-		pmic_data->vdd2 = &omap3_vdd2;
+//		omap3_vdd2.driver_data = &omap3_vdd2_drvdata;
+//		omap3_vdd2_drvdata.data = voltdm_lookup("core");
+//		pmic_data->vdd2 = &omap3_vdd2;
 	}
 
 	/* Common platform data configurations */
-- 
1.7.10.4

